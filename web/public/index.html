<!DOCTYPE html>
<html>
<head>
<title>Spotter</title>
	<style>
	ul {
		position: sticky;
	    list-style-type: none;
	    margin: 0;
	    padding: 0;
	    overflow: hidden;
	    background-color: #333;
	}
		li {
		    float: left;
		}

		li a {
		    display: block;
		    color: #f2f2f2;
		    text-align: center;
		    padding: 14px 16px;
		    font-size: 17px;
		    text-decoration: none;
		}

		li a:hover:not(.active) {
		    background-color: #111;
		}

		.active {
   			background-color: #4d94ff;
		}

		h1 {
			text-align: center;
		}

		h3 {
			font-size: 20px;
		}

		p.ex1 {
			font-size: 20px;
		}

		p.ex2 {
			font-size: 15px;
		}

		#map {
			float: left;
			width: 100%;
			height: 400px;
			background-color: grey;
		}

		table th, td{
			float: right;
			border: 1px solid black;
	  	  	border-collapse: collapse;
		}

		th, td {
		    padding: 2px;
		    text-align: left;
		    font-size: 7px;
		}

		#destination {
			float: left;
			width: 40%;
			height: 100px;
			font-size: 10px;
		}

    </style>
    
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase-database.js"></script>
    
    <script>
        var config = 
          {
            apiKey: "AIzaSyBD8z7IEJtKXhRQAe37Piad7moHD1JBBCY",
            authDomain: "spotter-6ba86.firebaseapp.com",
            databaseURL: "https://spotter-6ba86.firebaseio.com",
            projectId: "spotter-6ba86",
            storageBucket: "spotter-6ba86.appspot.com",
            messagingSenderId: "242336049467"
          };
        firebase.initializeApp(config);
        var database = firebase.database();
        var data = {};
        
        var map;
		function initMap() {
//                 var uluru = {lat: 40.425, lng: -86.929};
            getAllData();
            
            map = new google.maps.Map(document.getElementById('map'), {
					zoom: 13,
					center: {lat: 40.425, lng: -86.929}
				});

            
        }
        function addAnnotation()
        {
            var marker;
            for (var i in data)
            {
                marker = new google.maps.Marker({
                position: {lat: data[i]["Latitude"], lng: data[i]["Longitude"]},
                map: map
            });    
            }
        }
		
		
        
        function getData(id, path)
        {
              firebase.database().ref(path).once('value').then(
                    function(snapshot)
                    {
                         document.getElementById(id).innerHTML += (snapshot.val()); 
                    }
                );
        }
        function getAllData()
        {
            firebase.database().ref('/').once('value', 
                function(snapshot) 
                {
                    snapshot.forEach(
                        function(childSnapshot) 
                        {
                            var record = childSnapshot.key
                            var buff = {};
                            childSnapshot.forEach(
                                function(childSnapshot)
                                {
                                    var key = childSnapshot.key;
                                    var val = childSnapshot.val();
                                    buff[key] = val;
    //                                        window.alert(key + ' : ' + val);    
                                }
                            );

                            data[record] = buff;
                        }
                    );
                    addAnnotation();
                }
            );
            
        }
    </script>
    <script async defer 
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSrts5bW5PA9cFy9McRvFwfraVkwMeaT4&callback=initMap">
    </script>
</head>
<body>
    
	<h1>Let's Park!</h1>
	<ul>
		<li><a class="active" href="/">Home</a></li>
		<li><a href="/getLocation.html">Contribute</a></li>
		<li><a href="inputRank">Contribution Ranking</a></li>
		<li><a href="/about">About</a></li>
	</ul>

	<h3>Avaiable Spot</h3>
	<div id="map"></div>
	
	<div id="destination" >
		<p class="ex1">Where are you going?</p>
		<p class="ex2">example: "lawson"</p>
		<input type="search" name="destination">
		
	</div>

</body>
</html>
